\documentclass[../main.tex]{subfiles}

\begin{document}

\begin{figure*}[t]
    \[\begin{array}{lrclr}
        \textrm{Ctx} & \Gamma  & ::= & \epsilon                    & \textrm{empty context} \\
                     &         &     & \Gamma, \typeJ{\alpha}{K}   & \textrm{type variable} \\
                     &         &     & \Gamma, \termJ{x}{A}        & \textrm{term variable} \\
    \end{array}\]
    
    
    
    \judgmentdef{\(\ctxni{\Gamma}{J}\)}{Context $\Gamma$ contains judgment $J$}
    
    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\ctxni{\Gamma, \typeJ{\alpha}{K}}{\typeJ{\alpha}{K}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\ctxni{\Gamma, \termJ{x}{A}}{\termJ{x}{A}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\ctxni{\Gamma}{\typeJ{\alpha}{K}}\)}
        \AxiomC{\(\alpha \not= \beta\)}
        \BinaryInfC{\(\ctxni{\Gamma, \typeJ{\beta}{J}}{\typeJ{\alpha}{K}}\)}
    \end{prooftree}
    
     \begin{prooftree}
        \AxiomC{\(\ctxni{\Gamma}{\typeJ{\alpha}{K}}\)}
        \UnaryInfC{\(\ctxni{\Gamma, \termJ{y}{B}}{\typeJ{\alpha}{B}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\ctxni{\Gamma}{\termJ{x}{A}}\)}
        \UnaryInfC{\(\ctxni{\Gamma, \typeJ{\beta}{J}}{\termJ{x}{A}}\)}
    \end{prooftree}
    
     \begin{prooftree}
        \AxiomC{\(\ctxni{\Gamma}{\termJ{x}{A}}\)}
        \AxiomC{\(x \not= y\)}
        \BinaryInfC{\(\ctxni{\Gamma, \termJ{y}{B}}{\termJ{x}{A}}\)}
    \end{prooftree}
    
    
    
    \judgmentdef{\(\validJ{\Gamma}\)}{Context $\Gamma$ is valid}
    
    \begin{prooftree}
        \AxiomC{}
        \UnaryInfC{\(\validJ{\epsilon}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\validJ{\Gamma}\)}
        \AxiomC{$\alpha$ is free in $\Gamma$}
        \BinaryInfC{\(\Gamma, \typeJ{\alpha}{K}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\validJ{\Gamma}\)}
        \AxiomC{$x$ is free in $\Gamma$}
        \AxiomC{\(\hypJ{\Gamma}{\istypeJ{A}{\typeK{}}}\)}
        \TrinaryInfC{\(\Gamma, \termJ{x}{A}\)}
    \end{prooftree}
    
    
    \caption{Contexts}
    \label{fig:Plutus_core_contexts}
\end{figure*}





\begin{figure*}[t]
    \judgmentdef{\(\hypJ{\Gamma}{\istypeJ{A}{K}}\)}{In context $\Gamma$, type $A$ has kind $K$}
    
    \begin{prooftree}
        \AxiomC{\(\ctxni{\Gamma}{\typeJ{\alpha}{K}}\)}
        \RightLabel{tyvar}
        \UnaryInfC{\(\hypJ{\Gamma}{\istypeJ{\alpha}{K}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma, \typeJ{\alpha}{K}}{\istypeJ{A}{\typeK{}}}\)}
        \RightLabel{tyall}
        \UnaryInfC{\(\hypJ{\Gamma}{\istypeJ{\allT{\alpha}{K}{A}}{\typeK{}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma, \typeJ{\alpha}{\typeK{}}}{\istypeJ{A}{K}}\)}
        \AxiomC{\(K = \typeK{}\)}
        \RightLabel{tyfix}
        \BinaryInfC{\(\hypJ{\Gamma}{\istypeJ{\fixT{\alpha}{A}}{\typeK{}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma}{\istypeJ{B}{\typeK{}}}\)}
        \AxiomC{\(\hypJ{\Gamma}{\istypeJ{A}{\typeK{}}}\)}
        \RightLabel{tyfun}
        \BinaryInfC{\(\hypJ{\Gamma}{\istypeJ{\funT{B}{A}}{\typeK{}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma, \typeJ{\alpha}{J}}{\istypeJ{A}{K}}\)}
        \RightLabel{tylam}
        \UnaryInfC{\(\hypJ{\Gamma}{\istypeJ{\lamT{\alpha}{J}{A}}{\funK{J}{K}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma}{\istypeJ{A}{\funK{J}{K}}}\)}
        \AxiomC{\(\hypJ{\Gamma}{\istypeJ{B}{J}}\)}
        \RightLabel{tyapp}
        \BinaryInfC{\(\hypJ{\Gamma}{\istypeJ{\appT{A}{B}}{K}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{$bt$ has kind $K$ in Fig. \ref{fig:Plutus_core_builtins}}
        \RightLabel{tybuiltin}
        \UnaryInfC{\(\hypJ{\Gamma}{\istypeJ{\conT{bt}}{K}}\)}
    \end{prooftree}
    
    \caption{Kind Synthesis}
    \label{fig:Plutus_core_kind_synthesis}
\end{figure*}





\begin{figure*}[t]
    \judgmentdef{\(\hypJ{\Gamma}{\istermJ{M}{A}}\)}{In context $\Gamma$, term $M$ has type $A$}
    
    \begin{prooftree}
        \AxiomC{\(\ctxni{\Gamma}{\termJ{x}{A}}\)}
        \RightLabel{var}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{x}{A}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma, \termJ{x}{A}}{\istermJ{M}{A}}\)}
        \RightLabel{fix}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\fix{x}{A}{M}}{A}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma, \typeJ{\alpha}{K}}{\istermJ{M}{A}}\)}
        \RightLabel{abs}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\abs{\alpha}{K}{M}}{\allT{\alpha}{K}{A}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \alwaysNoLine
        \AxiomC{\(\hypJ{\Gamma}{\istermJ{L}{\allT{\alpha}{K}{B}}}\)}
        \UnaryInfC{\(\hypJ{\Gamma}{\istypeJ{A}{K'}}\)}
        \UnaryInfC{\(K = K'\)}
        \alwaysSingleLine
        \RightLabel{inst}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\inst{L}{A}}{\subst{A}{\alpha}{B}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \alwaysNoLine
        \AxiomC{\(\hypJ{\Gamma, \typeJ{\alpha}{\typeK{}}}{\istypeJ{A}{K}}\)}
        \UnaryInfC{\(K = \typeK{}\)}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{M}{\subst{\fixT{\alpha}{A}}{\alpha}{A}}}\)}
        \alwaysSingleLine
        \RightLabel{wrap}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\wrap{\alpha}{A}{M}}{\fixT{\alpha}{A}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma}{\istermJ{M}{\fixT{\alpha}{A}}}\)}
        \RightLabel{unwrap}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\unwrap{M}}{\subst{\fixT{\alpha}{A}}{\alpha}{A}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma, \termJ{y}{B}}{\istermJ{M}{A}}\)}
        \RightLabel{lam}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\lam{y}{B}{M}}{\funT{B}{A}}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \alwaysNoLine
        \AxiomC{\(\hypJ{\Gamma}{\istermJ{L}{\funT{A}{B}}}\)}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{M}{A'}}\)}
        \UnaryInfC{\(A = A'\)}
        \alwaysSingleLine
        \RightLabel{app}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\app{L}{M}}{B}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{$bi$ has type $A$ in Fig. \ref{fig:Plutus_core_builtins}}
        \RightLabel{builtin}
        \UnaryInfC{\(\hypJ{\Gamma}{\istermJ{\con{bi}}{A}}\)}
    \end{prooftree}
    
    \begin{prooftree}
        \AxiomC{\(\hypJ{\Gamma}{\istypeJ{A}{K}}\)}
        \AxiomC{\(K = \typeK{}\)}
        \RightLabel{error}
        \BinaryInfC{\(\hypJ{\Gamma}{\istermJ{\error{A}}{A}}\)}
    \end{prooftree}
    
    \caption{Type Synthesis}
    \label{fig:Plutus_core_type_synthesis}
\end{figure*}












\end{document}
